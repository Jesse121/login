(function(e){function r(r){for(var o,s,l=r[0],u=r[1],i=r[2],m=0,p=[];m<l.length;m++)s=l[m],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);c&&c(r);while(p.length)p.shift()();return a.push.apply(a,i||[]),t()}function t(){for(var e,r=0;r<a.length;r++){for(var t=a[r],o=!0,l=1;l<t.length;l++){var u=t[l];0!==n[u]&&(o=!1)}o&&(a.splice(r--,1),e=s(s.s=t[0]))}return e}var o={},n={app:0},a=[];function s(r){if(o[r])return o[r].exports;var t=o[r]={i:r,l:!1,exports:{}};return e[r].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=o,s.d=function(e,r,t){s.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,r){if(1&r&&(e=s(e)),8&r)return e;if(4&r&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)s.d(t,o,function(r){return e[r]}.bind(null,o));return t},s.n=function(e){var r=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(r,"a",r),r},s.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=r,l=l.slice();for(var i=0;i<l.length;i++)r(l[i]);var c=u;a.push([0,"chunk-vendors"]),t()})({0:function(e,r,t){e.exports=t("56d7")},"034f":function(e,r,t){"use strict";var o=t("85ec"),n=t.n(o);n.a},"0933":function(e,r,t){"use strict";var o=t("0950"),n=t.n(o);n.a},"0950":function(e,r,t){},"56d7":function(e,r,t){"use strict";t.r(r);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),n=function(){var e=this,r=e.$createElement,o=e._self._c||r;return o("div",{attrs:{id:"app"}},[o("img",{attrs:{alt:"Vue logo",src:t("cf05")}}),o("router-view")],1)},a=[],s={name:"App"},l=s,u=(t("034f"),t("2877")),i=Object(u["a"])(l,n,a,!1,null,null,null),c=i.exports,m=t("5c96"),p=t.n(m),f=(t("0fae"),t("8c4f")),d=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"hello"},[t("h1",[e._v(e._s(e.msg))]),e._m(0),t("h3",[e._v("Installed CLI Plugins")]),e._m(1),t("h3",[e._v("Essential Links")]),e._m(2),t("h3",[e._v("Ecosystem")]),e._m(3)])},v=[function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("p",[e._v(" For a guide and recipes on how to configure / customize this project,"),t("br"),e._v(" check out the "),t("a",{attrs:{href:"https://cli.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-cli documentation")]),e._v(". ")])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ul",[t("li",[t("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel",target:"_blank",rel:"noopener"}},[e._v("babel")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint",target:"_blank",rel:"noopener"}},[e._v("eslint")])])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ul",[t("li",[t("a",{attrs:{href:"https://vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Core Docs")])]),t("li",[t("a",{attrs:{href:"https://forum.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Forum")])]),t("li",[t("a",{attrs:{href:"https://chat.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("Community Chat")])]),t("li",[t("a",{attrs:{href:"https://twitter.com/vuejs",target:"_blank",rel:"noopener"}},[e._v("Twitter")])]),t("li",[t("a",{attrs:{href:"https://news.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("News")])])])},function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("ul",[t("li",[t("a",{attrs:{href:"https://router.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-router")])]),t("li",[t("a",{attrs:{href:"https://vuex.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vuex")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/vue-devtools#vue-devtools",target:"_blank",rel:"noopener"}},[e._v("vue-devtools")])]),t("li",[t("a",{attrs:{href:"https://vue-loader.vuejs.org",target:"_blank",rel:"noopener"}},[e._v("vue-loader")])]),t("li",[t("a",{attrs:{href:"https://github.com/vuejs/awesome-vue",target:"_blank",rel:"noopener"}},[e._v("awesome-vue")])])])}],h={name:"HelloWorld",props:{msg:String}},g=h,b=(t("0933"),Object(u["a"])(g,d,v,!1,null,"7b4a3f19",null)),_=b.exports,w=function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("div",{staticClass:"login"},[t("el-tabs",{model:{value:e.activeName,callback:function(r){e.activeName=r},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"登录",name:"first"}},[t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"pass"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("登录")]),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1),t("el-tab-pane",{attrs:{label:"注册",name:"second"}},[t("register")],1)],1)],1)},F=[],k=(t("b0c0"),function(){var e=this,r=e.$createElement,t=e._self._c||r;return t("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"100px"}},[t("el-form-item",{attrs:{label:"名称",prop:"name"}},[t("el-input",{attrs:{type:"text"},model:{value:e.ruleForm.name,callback:function(r){e.$set(e.ruleForm,"name",r)},expression:"ruleForm.name"}})],1),t("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[t("el-input",{attrs:{type:"email"},model:{value:e.ruleForm.email,callback:function(r){e.$set(e.ruleForm,"email",r)},expression:"ruleForm.email"}})],1),t("el-form-item",{attrs:{label:"密码",prop:"password"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.password,callback:function(r){e.$set(e.ruleForm,"password",r)},expression:"ruleForm.password"}})],1),t("el-form-item",{attrs:{label:"确认密码",prop:"checkPassword"}},[t("el-input",{attrs:{type:"password","auto-complete":"off"},model:{value:e.ruleForm.checkPassword,callback:function(r){e.$set(e.ruleForm,"checkPassword",r)},expression:"ruleForm.checkPassword"}})],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(r){return e.submitForm("ruleForm")}}},[e._v("注册")]),t("el-button",{on:{click:function(r){return e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)}),y=[],j=(t("d3b7"),t("ac1f"),t("5319"),t("bc3a")),$=t.n(j),x=t("2f62");o["default"].use(x["a"]);var O={token:window.sessionStorage.getItem("token"),username:""},P={LOGIN:function(e,r){e.token=r,window.sessionStorage.setItem("token",r)},LOGOUT:function(e){e.token=null,window.sessionStorage.removeItem("token")},USERNAME:function(e,r){e.username=r,window.sessionStorage.setItem("username",r)}},E={UserLogin:function(e,r){var t=e.commit;t("LOGIN",r)},UserLogout:function(e){var r=e.commit;r("LOGOUT")},UserName:function(e,r){var t=e.commit;t("USERNAME",r)}},S=new x["a"].Store({state:O,mutations:P,actions:E}),N=$.a.create({timeout:5e3,headers:{"Content-Type":"application/json;charset=UTF-8"}});N.interceptors.request.use((function(e){return S.state.token&&(e.headers.Authorization="token ".concat(S.state.token)),e})),N.interceptors.response.use((function(e){return e}),(function(e){if(e.response)switch(e.response.status){case 401:R.replace({path:"login",query:{redirect:R.currentRoute.fullPath}})}return Promise.reject(e.response)}));var q={userRegister:function(e){return N.post("/api/register",e)},userLogin:function(e){return N.post("/api/login",e)},getUser:function(){return N.get("/api/user")},delUser:function(e){return N.post("/api/delUser",e)}},L={data:function(){var e=this,r=function(r,t,o){""===t?o(new Error("请输入密码")):(""!==e.ruleForm.checkPass&&e.$refs.ruleForm.validateField("checkPass"),o())},t=function(r,t,o){""===t?o(new Error("请再次输入密码")):t!==e.ruleForm.password?o(new Error("两次输入密码不一致!")):o()},o=function(e,r,t){""===r?t(new Error("请输入邮箱")):/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r)?t():t(new Error("邮箱格式不正确，请重新输入"))};return{activeName:"second",ruleForm:{name:"",email:"",password:"",checkPassword:""},rules:{name:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],email:[{required:!0,validator:o,trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}],checkPassword:[{required:!0,validator:t,trigger:"blur"}]}}},methods:{submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;q.userRegister(JSON.stringify({name:r.ruleForm.name,email:r.ruleForm.email,password:r.ruleForm.password})).then((function(e){200===e.status&&(r.$message({type:"success",message:"注册成功"}),r.$router.push("login"))})).catch((function(e){return console.log(e)}))}))},resetForm:function(e){this.$refs[e].resetFields()}}},U=L,A=Object(u["a"])(U,k,y,!1,null,null,null),C=A.exports,I={data:function(){var e=this,r=function(r,t,o){""===t?o(new Error("请输入密码")):(""!==e.ruleForm.checkPassword&&e.$refs.ruleForm.validateField("checkPassword"),o())};return{activeName:"first",ruleForm:{name:"",password:"",checkPassword:""},rules:{name:[{required:!0,message:"请输入您的名称",trigger:"blur"},{min:2,max:5,message:"长度在 2 到 5 个字符",trigger:"blur"}],password:[{required:!0,validator:r,trigger:"blur"}]}}},methods:{resetForm:function(e){this.$refs[e].resetFields()},submitForm:function(e){var r=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;q.userLogin(JSON.stringify({name:r.ruleForm.name,password:r.ruleForm.password})).then((function(e){200===e.status&&(S.commit("LOGIN",e.data.token),r.$message({type:"success",message:"登录成功"}),r.$router.push("HelloWorld"))})).catch((function(e){return console.log(e)}))}))}},components:{register:C}},T=I,M=(t("9ce0"),Object(u["a"])(T,w,F,!1,null,null,null)),z=M.exports;o["default"].use(f["a"]);var G=new f["a"]({mode:"history",routes:[{path:"/",name:"home",component:_,meta:{requiresAuth:!0}},{path:"/HelloWorld",name:"HelloWorld",component:_,meta:{requiresAuth:!0}},{path:"/login",name:"login",component:z},{path:"/register",name:"register",component:C}]});G.beforeEach((function(e,r,t){var o=S.state.token;e.meta.requiresAuth?o?t():t({path:"/login",query:{redirect:e.fullPath}}):t()}));var R=G;o["default"].use(p.a),o["default"].config.productionTip=!1,new o["default"]({router:R,store:S,render:function(e){return e(c)}}).$mount("#app")},"85ec":function(e,r,t){},"9ce0":function(e,r,t){"use strict";var o=t("d64c"),n=t.n(o);n.a},cf05:function(e,r,t){e.exports=t.p+"img/logo.82b9c7a5.png"},d64c:function(e,r,t){}});
//# sourceMappingURL=app.06da6fe1.js.map